# Analysis: kbuild: enable CONFIG_WERROR for more build steps

**Generated**: 2025-08-27 17:06:12
**Series ID**: 991438
**Author**: Thomas Weißschuh
**Date**: 2025-08-14
**Patches**: 6
**Patchwork URL**: https://patchwork.kernel.org/project/rust-for-linux/list/?series=991438

---

# Executive Brief: kbuild: enable CONFIG_WERROR for more build steps

**Status**: Mature/stable  
**Significance**: Infrastructure improvement

## What & Why

This patchset extends the kernel's `CONFIG_WERROR` (warnings as errors) configuration to apply consistently across all build components including Rust code, linker operations, assembler, and user programs. Currently, `CONFIG_WERROR` only affects C compilation, creating inconsistent error handling that can allow warnings to slip through in Rust builds and other toolchain steps.

## Technical Context

The kernel build system has two mechanisms for treating warnings as errors: the `W=e` make flag and the `CONFIG_WERROR` configuration option, which currently work inconsistently. This patchset:

- Unifies `W=e` and `CONFIG_WERROR` behavior to eliminate confusion
- Moves Rust's `-Dwarnings` flag handling from `rust/Makefile` to the centralized warning infrastructure in `Makefile.extrawarn`
- Extends error-on-warning behavior to linker (`-Wl,--fatal-warnings`) and assembler operations
- Applies the same strict error handling to user-space programs built as part of the kernel

For Rust-for-Linux specifically, this ensures that Rust compilation respects the same warning policies as C code, preventing situations where kernel developers might miss Rust warnings that would be caught in C builds. The change integrates Rust more deeply into the kernel's existing quality assurance mechanisms.

The patchset is from Thomas Weißschuh (Linutronix) with Miguel Ojeda's sign-off, indicating Rust maintainer approval. The 13-day age with no discussion suggests the changes are straightforward infrastructure improvements rather than controversial modifications.